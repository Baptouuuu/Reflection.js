/*! Reflection.js#1.0.0 - 2014-04-02 */
var ReflectionClass=function(a){if(this===window)return new ReflectionClass(a);if("function"!=typeof a)throw new TypeError("You must pass a function as argument");this.definition=a};ReflectionClass.prototype=Object.create(Object.prototype,{PROPERTY_PATTERN:{value:"^this\\.([\\w_]+)\\s?=.*$"},getClass:{value:function(){return this.definition}},getProperties:{value:function(){var a,b,c=[],d=this.definition.toString().split("\n"),e=new RegExp(this.PROPERTY_PATTERN,"i");for(var f in d)f=d[f].trim(),a=e.exec(f),a&&a.length>=2&&(b=new ReflectionProperty(a[1],null),b.setClass(this),c.push(b));return c}},getProperty:{value:function(a){if(!this.hasProperty(a))throw new ReferenceError("Unknown property");var b=new ReflectionProperty(a,null);return b.setClass(this),b}},hasProperty:{value:function(a){var b,c=this.definition.toString().split("\n"),d=new RegExp(this.PROPERTY_PATTERN,"i");for(var e in c)if(e=c[e].trim(),b=d.exec(e),b&&b.length>=2&&b[1]===a)return!0;return!1}},getMethod:{value:function(a){if(!this.hasMethod(a))throw new ReferenceError("Unknown method");var b=new ReflectionMethod(a,this.definition.prototype[a]);return b.setClass(this),b}},hasMethod:{value:function(a){return this.definition.prototype.hasOwnProperty(a)&&"function"==typeof this.definition.prototype[a]?!0:!1}},getConstant:{value:function(a){if(!this.hasConstant(a))throw new ReferenceError("Unknown constant");var b=new ReflectionConstant(a,this.definition.prototype[a]);return b.setClass(this),b}},hasConstant:{value:function(a){return void 0===this.definition.prototype[a]||this.hasMethod(a)?!1:!0}},create:{value:function(){return new this.definition}},getPrototype:{value:function(){return this.definition.prototype}}});var ReflectionMethod=function(a,b){if(2!==arguments.length)throw new SyntaxError("You must specify method name and prototype");this.methodPrototype=b,this.name=a,this.classOwner=null,this.objectOwner=null};ReflectionMethod.prototype=Object.create(Object.prototype,{getPrototype:{value:function(){return this.methodPrototype}},getName:{value:function(){return this.name}},setObject:{value:function(a){if(!(a instanceof ReflectionObject))throw new TypeError("Invalid object");if(!a.hasMethod(this.getName()))throw new ReferenceError("The object does not own this method");return this.objectOwner=a,this}},getObject:{value:function(){return this.objectOwner}},setClass:{value:function(a){if(!(a instanceof ReflectionClass))throw new TypeError("Invalid class");if(!a.hasMethod(this.getName()))throw new ReferenceError("The class does not own this method");return this.classOwner=a,this}},getClass:{value:function(){return this.classOwner}},call:{value:function(){if("object"!==this.getContext())throw new SyntaxError("Can call the method only if reflected from an object");return this.getPrototype().apply(this.objectOwner.getObject(),arguments)}},getContext:{value:function(){return this.classOwner instanceof ReflectionClass&&null===this.objectOwner?"class":null===this.classOwner&&this.objectOwner instanceof ReflectionObject?"object":"unknown"}}});var ReflectionObject=function(a){if(this===window)return new ReflectionObject(a);if("object"!=typeof a)throw new TypeError("You must pass an object as argument");this.object=a};ReflectionObject.prototype=Object.create(Object.prototype,{getObject:{value:function(){return this.object}},getProperties:{value:function(){var a,b=[];for(var c in this.object)this.object.hasOwnProperty(c)&&(a=new ReflectionProperty(c,this.object[c]),a.setObject(this),b.push(a));return b}},getProperty:{value:function(a){if(!this.hasProperty(a))throw new ReferenceError("Unknown property");var b=new ReflectionProperty(a,this.object[a]);return b.setObject(this),b}},hasProperty:{value:function(a){return this.object.hasOwnProperty(a)?!0:!1}},getMethod:{value:function(a){if(!this.hasMethod(a))throw new ReferenceError("Unknown method");var b=new ReflectionMethod(a,this.object[a]);return b.setObject(this),b}},hasMethod:{value:function(a){return"function"!=typeof this.object[a]||this.hasProperty(a)?!1:!0}},getConstant:{value:function(a){if(!this.hasConstant(a))throw new ReferenceError("Unknown constant");var b=new ReflectionConstant(a,this.object[a]);return b.setObject(this),b}},hasConstant:{value:function(a){return!this.object[a]||this.hasProperty(a)||this.hasMethod(a)?!1:!0}},freeze:{value:function(){return Object.freeze(this.object),this}},isFrozen:{value:function(){return Object.isFrozen(this.object)}},seal:{value:function(){return Object.seal(this.object),this}},isSealed:{value:function(){return Object.isSealed(this.object)}},getPrototype:{value:function(){return Object.getPrototypeOf(this.object)}}});var ReflectionProperty=function(a,b){if(2!==arguments.length)throw new SyntaxError("You must specify property name and value");this.value=b,this.name=a,this.classOwner=null,this.objectOwner=null};ReflectionProperty.prototype=Object.create(Object.prototype,{getValue:{value:function(){return this.value}},getName:{value:function(){return this.name}},setObject:{value:function(a){if(!(a instanceof ReflectionObject))throw new TypeError("Invalid object");if(!a.hasProperty(this.getName()))throw new ReferenceError("The object does not own this property");return this.objectOwner=a,this}},getObject:{value:function(){return this.objectOwner}},setClass:{value:function(a){if(!(a instanceof ReflectionClass))throw new TypeError("Invalid class");if(!a.hasProperty(this.getName()))throw new ReferenceError("The class does not own this property");return this.classOwner=a,this}},getClass:{value:function(){return this.classOwner}}});var ReflectionConstant=function(a,b){if(2!==arguments.length)throw new SyntaxError("You must specify constant name and value");this.value=b,this.name=a,this.objectOwner=null,this.classOwner=null};ReflectionConstant.prototype=Object.create(Object.prototype,{getValue:{value:function(){return this.value}},getName:{value:function(){return this.name}},setObject:{value:function(a){if(!(a instanceof ReflectionObject))throw new TypeError("Invalid object");if(!a.hasConstant(this.getName()))throw new ReferenceError("The object does not own this constant");return this.objectOwner=a,this}},getObject:{value:function(){return this.objectOwner}},setClass:{value:function(a){if(!(a instanceof ReflectionClass))throw new TypeError("Invalid class");if(!a.hasConstant(this.getName()))throw new ReferenceError("The class does not own this constant");return this.classOwner=a,this}},getClass:{value:function(){return this.classOwner}},isWritable:{value:function(){return this.getMeta("writable")}},isConfigurable:{value:function(){return this.getMeta("configurable")}},isEnumerable:{value:function(){return this.getMeta("enumerable")}},getMeta:{value:function(a){if("class"!==this.getContext())throw new SyntaxError("Can get information only if reflected from a class");var b=Object.getOwnPropertyDescriptor(this.classOwner.getClass().prototype,this.getName());return b?b[a]:!1}},getContext:{value:function(){return this.classOwner instanceof ReflectionClass&&null===this.objectOwner?"class":null===this.classOwner&&this.objectOwner instanceof ReflectionObject?"object":"unknown"}}});